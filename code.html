<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BEU SGPA & CGPA Calculator</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Google Fonts: Inter -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    /* Custom styles for a better look and feel */
    body {
      font-family: 'Inter', sans-serif;
    }
    /* Custom focus style for inputs */
    .form-input:focus, .form-select:focus {
        border-color: #4f46e5;
        box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.2);
    }
    .grade-display {
        width: 60px; /* Fixed width for grade display */
        text-align: center;
        flex-shrink: 0;
    }
    .remove-btn {
        flex-shrink: 0;
    }
    /* Animation for the modal */
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(-10px); }
        to { opacity: 1; transform: translateY(0); }
    }
    .modal-fade-in {
        animation: fadeIn 0.3s ease-out;
    }
  </style>
</head>
<body class="bg-gray-900 text-white antialiased">

  <div class="container mx-auto p-4 md:p-8 max-w-4xl">
    <header class="text-center mb-10">
      <h1 class="text-4xl md:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-500">BEU SGPA & CGPA Calculator</h1>
      <p class="text-gray-400 mt-2">Bihar Engineering University (BEU) ke students ke liye.</p>
    </header>

    <main class="grid grid-cols-1 lg:grid-cols-2 gap-8">
      <!-- SGPA Calculator Section -->
      <div class="bg-gray-800 p-6 rounded-2xl shadow-lg border border-gray-700">
        <h2 class="text-2xl font-semibold mb-6 text-center text-purple-400">SGPA Calculator</h2>
        <div id="subjects-container" class="space-y-4 mb-4">
          <!-- Initial Subject Input -->
          <div class="subject-entry flex items-center gap-3">
            <select class="type-selector bg-gray-700 text-white border border-gray-600 rounded-lg p-3 form-select transition" onchange="handleRowUpdate(this)">
                <option value="theory">Theory</option>
                <option value="lab">Lab</option>
            </select>
            <input type="number" class="marks bg-gray-700 text-white border border-gray-600 rounded-lg p-3 w-full form-input transition" placeholder="Marks (0-100)" max="100" oninput="handleRowUpdate(this)">
            <input type="number" class="credits bg-gray-700 text-white border border-gray-600 rounded-lg p-3 w-full form-input transition" placeholder="Credits">
            <span class="grade-display bg-gray-600 text-white font-bold p-3 rounded-lg">Grade</span>
            <button onclick="removeEntry(this)" class="remove-btn bg-red-600 hover:bg-red-700 text-white font-bold p-3 rounded-lg transition hidden">&times;</button>
          </div>
        </div>
        <div class="flex flex-col sm:flex-row gap-4">
            <button onclick="addSubject()" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 px-4 rounded-lg transition duration-300 shadow-md">+ Subject Jodein</button>
            <button onclick="calculateSGPA()" class="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-4 rounded-lg transition duration-300 shadow-md">SGPA Calculate Karein</button>
        </div>
        <div id="sgpaResult" class="mt-6 text-center text-xl font-bold text-gray-300 h-8"></div>
      </div>

      <!-- CGPA Calculator Section -->
      <div class="bg-gray-800 p-6 rounded-2xl shadow-lg border border-gray-700">
        <h2 class="text-2xl font-semibold mb-6 text-center text-green-400">CGPA Calculator</h2>
        <div id="semesters-container" class="space-y-4 mb-4">
          <!-- Initial Semester Input -->
          <div class="semester-entry flex items-center gap-3">
            <input type="number" class="sgpa bg-gray-700 text-white border border-gray-600 rounded-lg p-3 w-1/2 form-input transition" placeholder="Semester ka SGPA">
            <input type="number" class="semCredits bg-gray-700 text-white border border-gray-600 rounded-lg p-3 w-1/2 form-input transition" placeholder="Semester ke Credits">
            <button onclick="removeEntry(this)" class="remove-btn bg-red-600 hover:bg-red-700 text-white font-bold p-3 rounded-lg transition hidden">&times;</button>
          </div>
        </div>
        <div class="flex flex-col sm:flex-row gap-4">
            <button onclick="addSemester()" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 px-4 rounded-lg transition duration-300 shadow-md">+ Semester Jodein</button>
            <button onclick="calculateCGPA()" class="w-full bg-purple-600 hover:bg-purple-700 text-white font-semibold py-3 px-4 rounded-lg transition duration-300 shadow-md">CGPA Calculate Karein</button>
        </div>
        <div id="cgpaResult" class="mt-6 text-center text-xl font-bold text-gray-300 h-8"></div>
      </div>
    </main>

    <footer class="text-center mt-12 pt-8 border-t border-gray-700">
        <p class="text-gray-400 mb-4">Created by Ankit Raj</p>
        <div class="flex justify-center items-center gap-6">
            <a href="https://www.linkedin.com/in/itsmeankitraj" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-white transition duration-300 flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg>
                LinkedIn
            </a>
            <a href="https://www.instagram.com/smarty_ankitraj/" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-white transition duration-300 flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.85s-.011 3.584-.069 4.85c-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07s-3.584-.012-4.85-.07c-3.252-.148-4.771-1.691-4.919-4.919-.058-1.265-.069-1.645-.069-4.85s.011-3.584.069-4.85c.149-3.225 1.664-4.771 4.919-4.919 1.266-.058 1.644-.07 4.85-.07zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948s.014 3.667.072 4.947c.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072s3.667-.014 4.947-.072c4.358-.2 6.78-2.618 6.98-6.98.059-1.281.073-1.689.073-4.948s-.014-3.667-.072-4.947c-.2-4.358-2.618-6.78-6.98-6.98-1.281-.058-1.689-.072-4.948-.072zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.162 6.162 6.162 6.162-2.759 6.162-6.162-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4s1.791-4 4-4 4 1.79 4 4-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.441 1.441 1.441 1.441-.645 1.441-1.441-.645-1.44-1.441-1.44z"/></svg>
                Instagram
            </a>
        </div>
    </footer>

  </div>

  <!-- Custom Alert/Modal -->
  <div id="custom-modal" class="fixed top-5 right-5 bg-red-500 text-white py-3 px-5 rounded-lg shadow-xl hidden modal-fade-in">
    <p id="modal-message"></p>
  </div>

  <script>
    // --- UTILITY FUNCTIONS ---

    // Custom modal dikhata hai
    function showModal(message) {
        const modal = document.getElementById('custom-modal');
        const messageEl = document.getElementById('modal-message');
        messageEl.innerText = message;
        modal.classList.remove('hidden');
        setTimeout(() => { modal.classList.add('hidden'); }, 3000);
    }

    // Theory ke liye Grade Point aur Letter Grade deta hai
    function getTheoryGradeInfo(marks) {
      if (marks > 100 || marks < 0) return { point: -1, grade: 'Invalid' };
      if (marks >= 90) return { point: 10, grade: 'A+' };
      if (marks >= 80) return { point: 9, grade: 'A' };
      if (marks >= 70) return { point: 8, grade: 'B' };
      if (marks >= 60) return { point: 7, grade: 'C' };
      if (marks >= 50) return { point: 6, grade: 'D' };
      if (marks >= 40) return { point: 5, grade: 'P' };
      return { point: 0, grade: 'F' }; // Fail
    }
    
    // Lab ke liye Grade Point aur Letter Grade deta hai
    function getLabGradeInfo(marks) {
      if (marks > 50 || marks < 0) return { point: -1, grade: 'Invalid' };
      if (marks >= 45) return { point: 10, grade: 'A+' };
      if (marks >= 40) return { point: 9, grade: 'A' };
      if (marks >= 35) return { point: 8, grade: 'B' };
      return { point: 0, grade: 'F' }; // Fail for anything below 35
    }

    // Row ko update karta hai jab type ya marks badalte hain
    function handleRowUpdate(element) {
        const row = element.closest('.subject-entry');
        const typeSelector = row.querySelector('.type-selector');
        const marksInput = row.querySelector('.marks');
        const gradeDisplay = row.querySelector('.grade-display');

        const selectedType = typeSelector.value;
        
        // Marks input ka placeholder aur max value update karein
        if (selectedType === 'theory') {
            marksInput.placeholder = 'Marks (0-100)';
            marksInput.max = 100;
        } else {
            marksInput.placeholder = 'Marks (0-50)';
            marksInput.max = 50;
        }

        const marks = parseFloat(marksInput.value);
        if (isNaN(marks)) {
            gradeDisplay.innerText = 'Grade';
            return;
        }

        const gradeInfo = selectedType === 'theory' ? getTheoryGradeInfo(marks) : getLabGradeInfo(marks);
        gradeDisplay.innerText = gradeInfo.grade;
    }

    // Remove buttons ki visibility update karta hai
    function updateRemoveButtons(containerSelector) {
        const entries = document.querySelectorAll(`${containerSelector} > div`);
        entries.forEach((entry) => {
            const removeBtn = entry.querySelector('.remove-btn');
            if (entries.length > 1) {
                removeBtn.classList.remove('hidden');
            } else {
                removeBtn.classList.add('hidden');
            }
        });
    }

    // Entry (subject ya semester) remove karta hai
    function removeEntry(button) {
        const entry = button.parentElement;
        const container = entry.parentElement;
        entry.remove();
        updateRemoveButtons(`#${container.id}`);
    }

    // --- SGPA CALCULATOR ---

    // Naya subject input field add karta hai
    function addSubject() {
      const container = document.getElementById("subjects-container");
      const div = document.createElement("div");
      div.className = "subject-entry flex items-center gap-3";
      div.innerHTML = `
        <select class="type-selector bg-gray-700 text-white border border-gray-600 rounded-lg p-3 form-select transition" onchange="handleRowUpdate(this)">
            <option value="theory">Theory</option>
            <option value="lab">Lab</option>
        </select>
        <input type="number" class="marks bg-gray-700 text-white border border-gray-600 rounded-lg p-3 w-full form-input transition" placeholder="Marks (0-100)" max="100" oninput="handleRowUpdate(this)">
        <input type="number" class="credits bg-gray-700 text-white border border-gray-600 rounded-lg p-3 w-full form-input transition" placeholder="Credits">
        <span class="grade-display bg-gray-600 text-white font-bold p-3 rounded-lg">Grade</span>
        <button onclick="removeEntry(this)" class="remove-btn bg-red-600 hover:bg-red-700 text-white font-bold p-3 rounded-lg transition">&times;</button>
      `;
      container.appendChild(div);
      updateRemoveButtons('#subjects-container');
    }

    // SGPA Calculate karta hai
    function calculateSGPA() {
      const subjectEntries = document.querySelectorAll(".subject-entry");
      let totalCredits = 0;
      let totalWeightedGradePoints = 0;
      let isValid = true;

      for (const entry of subjectEntries) {
        const type = entry.querySelector(".type-selector").value;
        const marks = parseFloat(entry.querySelector(".marks").value);
        const credits = parseFloat(entry.querySelector(".credits").value);

        if (isNaN(marks) || isNaN(credits) || credits <= 0) {
          showModal("Kripya sabhi fields mein valid number daalein.");
          isValid = false;
          break;
        }

        const gradeInfo = type === 'theory' ? getTheoryGradeInfo(marks) : getLabGradeInfo(marks);
        
        if (gradeInfo.point === -1) {
            const maxMarks = type === 'theory' ? 100 : 50;
            showModal(`Invalid marks: ${marks}. ${type.toUpperCase()} ke marks 0-${maxMarks} ke beech hone chahiye.`);
            isValid = false;
            break;
        }
        
        totalWeightedGradePoints += gradeInfo.point * credits;
        totalCredits += credits;
      }

      if (isValid) {
        if (totalCredits === 0) {
            showModal("Total credits zero nahi ho sakte.");
            return;
        }
        const sgpa = (totalWeightedGradePoints / totalCredits).toFixed(2);
        document.getElementById("sgpaResult").innerText = `Aapka SGPA hai: ${sgpa}`;
      }
    }

    // --- CGPA CALCULATOR ---

    function addSemester() {
      const container = document.getElementById("semesters-container");
      const div = document.createElement("div");
      div.className = "semester-entry flex items-center gap-3";
      div.innerHTML = `
        <input type="number" class="sgpa bg-gray-700 text-white border border-gray-600 rounded-lg p-3 w-1/2 form-input transition" placeholder="Semester ka SGPA">
        <input type="number" class="semCredits bg-gray-700 text-white border border-gray-600 rounded-lg p-3 w-1/2 form-input transition" placeholder="Semester ke Credits">
        <button onclick="removeEntry(this)" class="remove-btn bg-red-600 hover:bg-red-700 text-white font-bold p-3 rounded-lg transition">&times;</button>
      `;
      container.appendChild(div);
      updateRemoveButtons('#semesters-container');
    }

    function calculateCGPA() {
      const sgpaInputs = document.querySelectorAll(".sgpa");
      const creditInputs = document.querySelectorAll(".semCredits");
      let totalCredits = 0;
      let totalWeightedSGPA = 0;
      let isValid = true;

      for (let i = 0; i < sgpaInputs.length; i++) {
        const sgpa = parseFloat(sgpaInputs[i].value);
        const credits = parseFloat(creditInputs[i].value);

        if (isNaN(sgpa) || isNaN(credits) || sgpa < 0 || sgpa > 10 || credits <= 0) {
          showModal("Valid SGPA (0-10) aur positive credits daalein.");
          isValid = false;
          break;
        }
        totalWeightedSGPA += sgpa * credits;
        totalCredits += credits;
      }

      if (isValid) {
        if (totalCredits === 0) {
            showModal("Total credits zero nahi ho sakte.");
            return;
        }
        const cgpa = (totalWeightedSGPA / totalCredits).toFixed(2);
        document.getElementById("cgpaResult").innerText = `Aapka CGPA hai: ${cgpa}`;
      }
    }
    
    // Initial setup
    document.addEventListener('DOMContentLoaded', () => {
        updateRemoveButtons('#subjects-container');
        updateRemoveButtons('#semesters-container');
    });
  </script>
</body>
</html>
